- name: Test Cosmos DB Connection
  run: |
    node -e "
    const { CosmosClient } = require('@azure/cosmos');
    const endpoint = process.env.COSMOSDB_ENDPOINT;  # Certifique-se de que este segredo também está configurado
    const key = process.env.CHAVE_AZURE;  # Segredo do GitHub Actions
    const client = new CosmosClient({ endpoint, key });

    async function testConnection() {
      try {
        const { database } = await client.databases.readAll().fetchAll();
        console.log('Conexão bem-sucedida ao Cosmos DB!');
        console.log(database);
      } catch (err) {
        console.error('Erro ao conectar ao Cosmos DB:', err.message);
      }
    }
    
    testConnection();
    "
